<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>專題網頁</title>
	<link rel="stylesheet" href="css/text.css" type="text/css">
    <style type="text/css">
		.container {margin: 100px auto;}
		.large_font {font-size: 24px;}
		.super_large_font {font-size: 40px;}
		.round_banner {border-radius: 20px;}
		.round_image {border-radius: 50%;}

	</style>

</head>
<body>

<div id="page">
<div id="header">
	<table align="center">
		<tr>
			<td height="150px"  align="right">
				<span><img width="140px" height="140px" src="img1.png"></span>
			</td>
			<td height="150px" align="center">
				<h1 id="logo"> <a href="index.html">智慧醫療麻醉深度之預測</a> </h1>
			</td>
			<td height="150px"  align="right">
				<span><img width="140px" height="140px" src="img2.png"></span>
			</td>
		</tr>
	</table>
	<div id="navigation">
		<ul class="drop-down-menu">
			<li class="large_font">
				<a href="index.html">首頁</a>
			</li>
			<li class="large_font">
				<a href="introduction.html">團隊介紹</a>
			</li>
			<li class="large_font">
				<a href="motivation.html">研究動機&目的</a>
			</li>
			<li class="large_font">
				<a href="description.html">背景說明</a>
			</li>
			<li class="large_font">
				<a href="description1.html">資料描述</a>
				<ul class="large_font">
					<li><a href="model01.html">模型一-----預測半身麻醉深度</a></li>
					<li><a href="model02.html">模型二-----預測麻醉後10分鐘的收縮壓</a></li>
					<li><a href="model03.html">模型三-----預測麻醉後10分鐘的舒張壓</a></li>
					<li><a href="model04.html">模型四-----預測麻醉後10分鐘的心跳變化</a></li>
					<li><a href="model05.html">模型五-----預測下刀後10分鐘的收縮壓</a></li>
					<li><a href="model06.html">模型六-----預測下刀後10分鐘的舒張壓</a></li>
					<li><a href="model07.html">模型七-----預測下刀後10分鐘的心跳變化</a></li>
					<li><a href="model08.html">模型八-----預測半身麻醉後是否使用升壓劑</a></li>
					<li><a href="model09.html">模型九-----預測半身麻醉後是否使用止痛藥</a></li>
				</ul>
			</li>
			<li class="large_font">
				<a href="process.html">研究過程</a>
					<ul class="large_font">
						<li><a href="employ.html">使用平台與套件</a></li>
						<li><a href="method.html">研究方法</a></li>
						<li><a href="steps.html">研究步驟</a></li>
					</ul>
			</li>
			<li>
				<a href="results.html" class="large_font">成果解說</a>
				<ul class="large_font">
					<li><a href="model1.html">模型一-----預測半身麻醉深度</a></li>
					<li><a href="model2.html">模型二-----預測麻醉後10分鐘的收縮壓</a></li>
					<li><a href="model3.html">模型三-----預測麻醉後10分鐘的舒張壓</a></li>
					<li><a href="model4.html">模型四-----預測麻醉後10分鐘的心跳變化</a></li>
					<li><a href="model5.html">模型五-----預測下刀後10分鐘的收縮壓</a></li>
					<li><a href="model6.html">模型六-----預測下刀後10分鐘的舒張壓</a></li>
					<li><a href="model7.html">模型七-----預測下刀後10分鐘的心跳變化</a></li>
					<li><a href="model8.html">模型八-----預測半身麻醉後是否使用升壓劑</a></li>
					<li class="selected"><a href="model9.html">模型九-----預測半身麻醉後是否使用止痛藥</a></li>
				</ul>
			</li>
			<li class="large_font">
				<a href="conclusion.html">結論</a>
			</li>
			<li class="large_font">
				<a href="reference.html">參考資料</a>
			</li>
			</ul>
		</div>
	</div>
</div>

<article>
<div id="body">
<h1>模型九<br>預測半身麻醉後是否使用止痛藥</h1>
<p class="t1_font">
	<br><b>特徵篩選</b>
	<br>我們透過Lasso Regression進行特徵篩選，總共篩選出了5個變數，結果如下:
	<br>[1]手術科別為婦產科
	<br>[2]病人麻醉風險為1與術前有懷孕與身體質量指數之交互作用
	<br>[3]半身麻醉注射部位為L4-5或L5-S1與術前有懷孕與年齡之交互作用
	<br>[4]半身麻醉注射部位為L4-5或L5-S1與術前有懷孕與年齡的平方之交互作用
	<br>[5]半身麻醉注射部位為L2-3與術前有懷孕與理想體重的平方之交互作用
	<br>
	<br>
	<br><b>資料平衡</b>
	<br>&emsp;&emsp;透過隨機抽樣將原始資料的百分之八十作為訓練集，其餘的百分之二十作為
	<br>測試集，而有使用止痛劑的人數遠少於沒有使用的人數，但我們的目的是希望
	<br>預測到有使用止痛劑的人，因此在進行建模之前，我們使用R語言的SMOTE函數
	<br>將數量少的類別採用over-sampling的概念放大，數量較多的則採用under-sampling
	<br>的概念減少，藉此達到資料平衡的效果讓每一類的人數差距減少，避免模型訓練
	<br>或預測時數量多的類別容易被預測到。
	<br>
	<br>&emsp;&emsp;將資料平衡後的訓練集分別使用7種演算法(XGB、SVM、Rule based、KNN、
	<br>naive bayes、Logistic Regression、Catboost)進行建模，我們從7個模型
	<br>當中選出3個預測結果最好的顯示如下:
	<br>
	<br><br>(A)XGboost
	<br>預測結果：
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>818(93.27%)</td>
				<td>7(0.79%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>46(5.24%)</td>
				<td>6(0.68%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:46.15% 特異度:94.68%
	<br>
	<br><br>(B)Svm
	<br>預測結果：
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>817(93.15%)</td>
				<td>7(0.79%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>47(5.35%)</td>
				<td>6(0.68%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:46.15% 特異度:94.56%
	<br>
	<br><br>(C)Logistic
	<br>預測結果：
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>819(93.38%)</td>
				<td>7(0.79%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>45(5.13%)</td>
				<td>6(0.68%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:46.15% 特異度:94.79%
	<br>
	<br>
	<br><b>交叉驗證</b>
	<br>&emsp;&emsp;為了確認模型不是受到極端數據的影響，造成預測結果的精確度不佳，因此
	<br>我們透過交叉驗證進行多次的模型訓練，藉由調整過後的模型與原先的模型相
	<br>比差異有多少。
	<br><br>(A)XGboost
	<br>預測結果(原始)：
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>818(93.27%)</td>
				<td>7(0.79%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>46(5.24%)</td>
				<td>6(0.68%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:46.15% 特異度:94.68%
	<br>
	<br>預測結果(交叉驗證後):
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>819(93.38%)</td>
				<td>6(0.68%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>44(5.02%)</td>
				<td>8(0.91%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:57.14% 特異度:94.9%
	<br>
	<br><br>(B)Svm
	<br>預測結果(原始)：
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>817(93.15%)</td>
				<td>7(0.79%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>47(5.35%)</td>
				<td>6(0.68%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:46.15% 特異度:94.56%
	<br>
	<br>預測結果(交叉驗證後):
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>819(93.38%)</td>
				<td>5(0.57%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>44(5.02%)</td>
				<td>9(1.02%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:64.28% 特異度:94.9%
	<br>
	<br><br>(C)Logistic
	<br>預測結果(原始)：
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>819(93.38%)</td>
				<td>7(0.79%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>45(5.13%)</td>
				<td>6(0.68%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:46.15% 特異度:94.79%
	<br>
	<br>預測結果(交叉驗證後):
	<br>
	<table border="1" cellspacing="2" cellpadding="6" align="center">
		<tbody align="center">
			<tr>
				<td></td>
				<td>實際NO</td>
				<td>實際Yes</td>
			</tr>
			<tr>
				<td>預測No</td>
				<td>819(93.38%)</td>
				<td>5(0.57%)</td>
			</tr>
			<tr>
				<td>預測Yes</td>
				<td>44(5.02%)</td>
				<td>9(1.02%)</td>
			</tr>
		</tbody>
	</table>
	<br>敏感度:64.28% 特異度:94.9%
	<br>
	<br>
	<br>
	<br>
</p>
</div>
</article>
	
	
<footer>
	<div id="footer">
		<div id="Main">
			<div class="background">
				<div class="body">
					<p style="text-align: center;">
						<span style="color: purple;font-size: 24px;">&#9734;</span>
						<span style="color: orange;font-size: 24px;"><b>資料科學</b></span>
						<span style="color: black;font-size: 24px;">幫助人類，</span>
						<span style="color: orange;font-size: 24px;"><b>人工智慧</b></span>
						<span style="color: black;font-size: 24px;">創新世界</span>
						<span style="color: purple;font-size: 24px;">&#9734;</span>
					</p>
					<div id="section1">
						<table align="center" width="600px">
							<tr>
								<td>
									<p>靜宜大學<br>Providence University</p>
									<p>43301臺中市沙鹿區臺灣大道7段200號<br>
										200, Sec. 7, Taiwan Boulevard, Shalu Dist.,<br>
										Taichung City 43301 Taiwan
									</p>
								</td>
								<td>
									<p>靜宜大學<br>資料科學暨大數據分析與應用學系<br>PUDS</p>
									<p>電 話：886-4 26328001<br>#15051,15052,15053<br>
										傳 真：(04) 2631-4846<br>
										信 箱：pu20250@pu.edu.tw
									</p>
								</td>
							</tr>
						</table>
					</div>

				</div>
			</div>
		</div>
	</div>
</footer>






</body>
</html>